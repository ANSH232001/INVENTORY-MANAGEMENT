<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>Customer Details</title>-->
<!--    <style>-->
<!--        body {-->
<!--            font-family: Arial, sans-serif;-->
<!--            margin: 40px;-->
<!--        }-->

<!--        table {-->
<!--            border-collapse: collapse;-->
<!--            width: 90%;-->
<!--            margin: auto;-->
<!--        }-->

<!--        th, td {-->
<!--            border: 1px solid #ddd;-->
<!--            padding: 12px;-->
<!--            text-align: left;-->
<!--            vertical-align: top;-->
<!--        }-->

<!--        th {-->
<!--            background-color: #4CAF50;-->
<!--            color: white;-->
<!--        }-->

<!--        caption {-->
<!--            font-size: 1.5rem;-->
<!--            font-weight: bold;-->
<!--            margin-bottom: 20px;-->
<!--            text-align: center;-->
<!--        }-->

<!--        select, input[readonly] {-->
<!--            width: 100%;-->
<!--            padding: 8px 6px;-->
<!--            box-sizing: border-box;-->
<!--            border: 1px solid #ccc;-->
<!--            border-radius: 4px;-->
<!--            background-color: #f9f9f9;-->
<!--        }-->

<!--        button.delete-btn {-->
<!--            background: none;-->
<!--            border: none;-->
<!--            cursor: pointer;-->
<!--            padding: 0;-->
<!--            width: 24px;-->
<!--            height: 24px;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--        }-->

<!--        button.delete-btn svg {-->
<!--            fill: #d9534f;-->
<!--            width: 20px;-->
<!--            height: 20px;-->
<!--            transition: fill 0.3s ease;-->
<!--        }-->

<!--        button.delete-btn:hover svg {-->
<!--            fill: #a94442;-->
<!--        }-->

<!--        button.add-line-btn {-->
<!--            margin-top: 5px;-->
<!--            padding: 6px 12px;-->
<!--            background-color: #008080;-->
<!--            color: white;-->
<!--            font-weight: 600;-->
<!--            border: none;-->
<!--            border-radius: 8px;-->
<!--            cursor: pointer;-->
<!--            font-size: 0.9rem;-->
<!--            box-shadow: 0 3px 6px rgba(0, 128, 128, 0.3);-->
<!--            transition: background-color 0.3s ease;-->
<!--            display: inline-block;-->
<!--        }-->

<!--        button.add-line-btn:hover {-->
<!--            background-color: #006666;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--&lt;!&ndash; Customer Details Section &ndash;&gt;-->
<!--<div style="display: flex; max-width: 100vw; gap: 40px; align-items: flex-start; margin: 20px auto;">-->

<!--  &lt;!&ndash; Left side: Customer Details form &ndash;&gt;-->
<!--  <div style="flex: 0 0 280px;"> &lt;!&ndash; fixed width column &ndash;&gt;-->
<!--    <h2>Customer Details</h2>-->
<!--    <form id="customerDetails" style="display: flex; flex-direction: column; gap: 15px;">-->
<!--      <div>-->
<!--        <label for="customerName" style="display: block; margin-bottom: 6px;">Name:</label>-->
<!--        <input type="text" id="customerName" name="customerName" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">-->
<!--      </div>-->
<!--      <div>-->
<!--        <label for="customerAddress" style="display: block; margin-bottom: 6px;">Address:</label>-->
<!--        <input type="text" id="customerAddress" name="customerAddress" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">-->
<!--      </div>-->
<!--      <div>-->
<!--        <label for="customerPhone" style="display: block; margin-bottom: 6px;">Phone Number:</label>-->
<!--        <input type="tel" id="customerPhone" name="customerPhone" style="width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #ccc;">-->
<!--      </div>-->
<!--    </form>-->
<!--  </div>-->

<!--  &lt;!&ndash; Right side: Product table &ndash;&gt;-->
<!--  <div style="flex: 1 1 auto; overflow-x: auto;">-->
<!--    <table id="productTable" style="width: 100%; border-collapse: collapse;">-->
<!--      &lt;!&ndash; Your existing table structure here &ndash;&gt;-->
<!--      &lt;!&ndash; ... &ndash;&gt;-->
<!--    </table>-->
<!--  </div>-->

<!--</div>-->



<!--<table id="productTable">-->
<!--    <caption>Customer Product Details</caption>-->
<!--    <thead>-->
<!--    <tr>-->
<!--        <th>Select Product</th>-->
<!--        <th>Product Code</th>-->
<!--        <th>Name</th>-->
<!--        <th>Capacity</th>-->
<!--        <th>Configuration</th>-->
<!--        <th>Model Name</th>-->
<!--        <th>Dealer Zone</th>-->
<!--        <th>Current Stock</th>-->
<!--        <th>Rate</th>-->
<!--    </tr>-->
<!--    </thead>-->
<!--    <tbody id="tableBody">-->
<!--    <tr class="data-row">-->
<!--        <td>-->
<!--            <select onchange="updateProductDetails(this)" aria-label="Select product">-->
<!--                <option value="" disabled selected>Select a product</option>-->
<!--                {% for product in products %}-->
<!--                <option value="{{ product.product_code }}"-->
<!--                        data-name="{{ product.name }}"-->
<!--                        data-capacity="{{ product.capacity }}"-->
<!--                        data-configuration="{{ product.configuration }}"-->
<!--                        data-model_name="{{ product.model_name }}"-->
<!--                        data-dealer_zone="{{ product.dealer_zone }}"-->
<!--                        data-current_stock="{{ product.current_stock }}"-->
<!--                        data-rate="{{ product.rate }}">-->
<!--                    {{ product.product_code }} - {{ product.name }}-->
<!--                </option>-->
<!--                {% endfor %}-->
<!--            </select>-->
<!--            <button type="button" class="add-line-btn" onclick="addRowBelow(this)" aria-label="Add a line">Add a Line-->
<!--            </button>-->
<!--        </td>-->
<!--        <td><input type="text" readonly></td>-->
<!--        <td><input type="text" readonly></td>-->
<!--        <td><input type="text" readonly></td>-->
<!--        <td><input type="text" readonly></td>-->
<!--        <td><input type="text" readonly></td>-->
<!--        <td><input type="text" readonly></td>-->
<!--        <td><input type="text" readonly></td>-->
<!--        <td><input type="text" readonly></td>-->
<!--        <td>-->
<!--            <button type="button" class="delete-btn" onclick="removeRow(this)" aria-label="Delete row">-->
<!--                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" aria-hidden="true" focusable="false">-->
<!--                    <path d="M53.2 467c1.3 25.8 22.5 45 48.6 45h148.3c26.1 0 47.3-19.3 48.6-45L312 128H40l13.2 339zm64.5-210c6.6 0 12 5.4 12 12v128c0 6.6-5.4 12-12 12s-12-5.4-12-12V269c0-6.6 5.4-12 12-12zm96 0c6.6 0 12 5.4 12 12v128c0 6.6-5.4 12-12 12s-12-5.4-12-12V269c0-6.6 5.4-12 12-12zM288 64h-80l-8-16H152l-8 16H64v32h224V64z"/>-->
<!--                </svg>-->
<!--            </button>-->
<!--        </td>-->
<!--    </tr>-->
<!--    </tbody>-->
<!--</table>-->

<!--<a href="{{ url_for('dashboard') }}" class="button" role="button" aria-label="Back to Dashboard"-->
<!--   style="max-width:220px; margin:20px auto; display:block;">Back to Dashboard</a>-->

<!--<script>-->
<!--    function updateProductDetails(selectElement) {-->
<!--        const selectedOption = selectElement.options[selectElement.selectedIndex];-->
<!--        const row = selectElement.closest('tr');-->
<!--        row.querySelectorAll('input').forEach((input, index) => {-->
<!--            switch (index) {-->
<!--                case 0:-->
<!--                    input.value = selectedOption.value || '';-->
<!--                    break;              // Product Code-->
<!--                case 1:-->
<!--                    input.value = selectedOption.getAttribute('data-name') || '';-->
<!--                    break;-->
<!--                case 2:-->
<!--                    input.value = selectedOption.getAttribute('data-capacity') || '';-->
<!--                    break;-->
<!--                case 3:-->
<!--                    input.value = selectedOption.getAttribute('data-configuration') || '';-->
<!--                    break;-->
<!--                case 4:-->
<!--                    input.value = selectedOption.getAttribute('data-model_name') || '';-->
<!--                    break;-->
<!--                case 5:-->
<!--                    input.value = selectedOption.getAttribute('data-dealer_zone') || '';-->
<!--                    break;-->
<!--                case 6:-->
<!--                    input.value = selectedOption.getAttribute('data-current_stock') || '';-->
<!--                    break;-->
<!--                case 7:-->
<!--                    input.value = selectedOption.getAttribute('data-rate') || '';-->
<!--                    break;-->
<!--            }-->
<!--        });-->
<!--    }-->

<!--    function addRowBelow(button) {-->
<!--        const currentRow = button.closest('tr');-->
<!--        const newRow = currentRow.cloneNode(true);-->

<!--        // Reset the select and inputs in the new row-->
<!--        const select = newRow.querySelector('select');-->
<!--        select.selectedIndex = 0;-->
<!--        newRow.querySelectorAll('input').forEach(input => input.value = '');-->

<!--        select.onchange = function () {-->
<!--            updateProductDetails(this);-->
<!--        };-->

<!--        // Remove add-line button from current row and from cloned row before inserting-->
<!--        const oldAddBtn = currentRow.querySelector('.add-line-btn');-->
<!--        if (oldAddBtn) oldAddBtn.remove();-->

<!--        const newAddBtn = newRow.querySelector('.add-line-btn');-->
<!--        if (newAddBtn) newAddBtn.remove();-->

<!--        // Insert the new row right after the current row-->
<!--        currentRow.parentNode.insertBefore(newRow, currentRow.nextSibling);-->

<!--        // Create a new add-line button and append to the new row's first cell-->
<!--        const addBtn = document.createElement('button');-->
<!--        addBtn.type = 'button';-->
<!--        addBtn.className = 'add-line-btn';-->
<!--        addBtn.textContent = 'Add a Line';-->
<!--        addBtn.setAttribute('aria-label', 'Add a line');-->
<!--        addBtn.onclick = function () {-->
<!--            addRowBelow(this);-->
<!--        };-->
<!--        newRow.cells[0].appendChild(addBtn);-->
<!--    }-->

<!--    function removeRow(button) {-->
<!--        const tableBody = document.getElementById('tableBody');-->
<!--        if (tableBody.rows.length > 1) {-->
<!--            button.closest('tr').remove();-->
<!--            // If the removed row had the add button, ensure last row has the "Add a Line" button-->
<!--            if (!document.querySelector('.add-line-btn')) {-->
<!--                const rows = tableBody.querySelectorAll('tr');-->
<!--                if (rows.length > 0) {-->
<!--                    const lastRowFirstCell = rows[rows.length - 1].cells[0];-->
<!--                    let addBtn = document.createElement('button');-->
<!--                    addBtn.type = 'button';-->
<!--                    addBtn.className = 'add-line-btn';-->
<!--                    addBtn.textContent = 'Add a Line';-->
<!--                    addBtn.setAttribute('aria-label', 'Add a line');-->
<!--                    addBtn.onclick = function () {-->
<!--                        addRowBelow(this);-->
<!--                    };-->
<!--                    lastRowFirstCell.appendChild(addBtn);-->
<!--                }-->
<!--            }-->
<!--        } else {-->
<!--            alert('At least one product line is required.');-->
<!--        }-->
<!--    }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html>
<head>
    <title>Customer Details</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background:#f5f7fa;
        }

        /* Framed container like Odoo */
        .frame {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 4px 12px rgb(0 0 0 / 0.1);
            border-radius: 8px;
            padding: 30px 40px;
        }

        /* Flex layout for left and right panels */
        .flex-container {
            display: flex;
            gap: 40px;
            align-items: flex-start;
        }

        /* Customer details panel */
        .customer-details {
            flex: 0 0 280px;
            border-right: 1px solid #e0e0e0;
            padding-right: 30px;
        }

        .customer-details h2 {
            margin-top: 0;
            font-weight: 600;
            color: #333;
        }

        .customer-details form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .customer-details label {
            font-weight: 600;
            margin-bottom: 6px;
            display: block;
            color: #555;
        }

        .customer-details input {
            width: 100%;
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        /* Product table container */
        .product-table-container {
            flex: 1 1 auto;
            overflow-x: auto;
        }

        /* Odoo style table with uniform borders */
        table {
            border-collapse: collapse;
            border: 1px solid #d7d7d7;
            border-radius: 6px;
            overflow: hidden;
            width: 100%;
        }

        th, td {
            border: 1px solid #d7d7d7;
            padding: 12px;
            text-align: left;
            vertical-align: top;
        }

        thead th {
            background-color: #0277bd;
            color: white;
            font-weight: 600;
        }

        select, input[readonly] {
            width: 100%;
            padding: 8px 6px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #f9f9f9;
        }

        button.delete-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        button.delete-btn svg {
            fill: #d9534f;
            width: 20px;
            height: 20px;
            transition: fill 0.3s ease;
        }

        button.delete-btn:hover svg {
            fill: #a94442;
        }

        button.add-line-btn {
            margin-top: 5px;
            padding: 6px 12px;
            background-color: #008080;
            color: white;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            box-shadow: 0 3px 6px rgba(0, 128, 128, 0.3);
            transition: background-color 0.3s ease;
            display: inline-block;
        }

        button.add-line-btn:hover {
            background-color: #006666;
        }

        .back-button {
            max-width: 220px;
            margin: 30px auto 0 auto;
            display: block;
            text-align: center;
            background: #0277bd;
            color: #fff;
            padding: 12px 20px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="frame">

    <div class="flex-container">

        <!-- Customer Details -->
        <div class="customer-details">
            <h2>Customer Details</h2>
            <form id="customerDetails" method="POST" action="">
                <div>
                    <label for="customerName">Name:</label>
                    <input type="text" id="customerName" name="customerName" required>
                </div>
                <div>
                    <label for="customerAddress">Address:</label>
                    <input type="text" id="customerAddress" name="customerAddress" required>
                </div>
                <div>
                    <label for="customerPhone">Phone Number:</label>
                    <input type="tel" id="customerPhone" name="customerPhone" required>
                </div>
            </form>
        </div>

        <!-- Product Table -->
        <div class="product-table-container">
            <table id="productTable">
                <caption>Customer Product Details</caption>
                <thead>
                <tr>
                    <th>Select Product</th>
                    <th>Product Code</th>
                    <th>Name</th>
                    <th>Capacity</th>
                    <th>Configuration</th>
                    <th>Model Name</th>
                    <th>Dealer Zone</th>
                    <th>Current Stock</th>
                    <th>Rate</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody id="tableBody">
                <tr class="data-row">
                    <td>
                        <select onchange="updateProductDetails(this)" aria-label="Select product" required>
                            <option value="" disabled selected>Select a product</option>
                            {% for product in products %}
                            <option value="{{ product.product_code }}"
                                    data-name="{{ product.name }}"
                                    data-capacity="{{ product.capacity }}"
                                    data-configuration="{{ product.configuration }}"
                                    data-model_name="{{ product.model_name }}"
                                    data-dealer_zone="{{ product.dealer_zone }}"
                                    data-current_stock="{{ product.current_stock }}"
                                    data-rate="{{ product.rate }}">
                                {{ product.product_code }} - {{ product.name }}
                            </option>
                            {% endfor %}
                        </select>
                        <button type="button" class="add-line-btn" onclick="addRowBelow(this)" aria-label="Add a line">Add a Line
                        </button>
                    </td>
                    <td><input type="text" readonly></td>
                    <td><input type="text" readonly></td>
                    <td><input type="text" readonly></td>
                    <td><input type="text" readonly></td>
                    <td><input type="text" readonly></td>
                    <td><input type="text" readonly></td>
                    <td><input type="text" readonly></td>
                    <td><input type="text" readonly></td>
                    <td>
                        <button type="button" class="delete-btn" onclick="removeRow(this)" aria-label="Delete row">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" aria-hidden="true" focusable="false">
                                <path d="M53.2 467c1.3 25.8 22.5 45 48.6 45h148.3c26.1 0 47.3-19.3 48.6-45L312 128H40l13.2 339zm64.5-210c6.6 0 12 5.4 12 12v128c0 6.6-5.4 12-12 12s-12-5.4-12-12V269c0-6.6 5.4-12 12-12zm96 0c6.6 0 12 5.4 12 12v128c0 6.6-5.4 12-12 12s-12-5.4-12-12V269c0-6.6 5.4-12 12-12zM288 64h-80l-8-16H152l-8 16H64v32h224V64z"/>
                            </svg>
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </div>

    <a href="{{ url_for('dashboard') }}" class="back-button" role="button" aria-label="Back to Dashboard">Back to Dashboard</a>

</div>

<script>
    function updateProductDetails(selectElement) {
        const selectedOption = selectElement.options[selectElement.selectedIndex];
        const row = selectElement.closest('tr');
        row.querySelectorAll('input').forEach((input, index) => {
            switch (index) {
                case 0:
                    input.value = selectedOption.value || '';
                    break;              // Product Code
                case 1:
                    input.value = selectedOption.getAttribute('data-name') || '';
                    break;
                case 2:
                    input.value = selectedOption.getAttribute('data-capacity') || '';
                    break;
                case 3:
                    input.value = selectedOption.getAttribute('data-configuration') || '';
                    break;
                case 4:
                    input.value = selectedOption.getAttribute('data-model_name') || '';
                    break;
                case 5:
                    input.value = selectedOption.getAttribute('data-dealer_zone') || '';
                    break;
                case 6:
                    input.value = selectedOption.getAttribute('data-current_stock') || '';
                    break;
                case 7:
                    input.value = selectedOption.getAttribute('data-rate') || '';
                    break;
            }
        });
    }

    function addRowBelow(button) {
        const currentRow = button.closest('tr');
        const newRow = currentRow.cloneNode(true);

        // Reset the select and inputs in the new row
        const select = newRow.querySelector('select');
        select.selectedIndex = 0;
        newRow.querySelectorAll('input').forEach(input => input.value = '');

        select.onchange = function () {
            updateProductDetails(this);
        };

        // Remove add-line button from current row and from cloned row before inserting
        const oldAddBtn = currentRow.querySelector('.add-line-btn');
        if (oldAddBtn) oldAddBtn.remove();

        const newAddBtn = newRow.querySelector('.add-line-btn');
        if (newAddBtn) newAddBtn.remove();

        // Insert the new row right after the current row
        currentRow.parentNode.insertBefore(newRow, currentRow.nextSibling);

        // Create a new add-line button and append to the new row's first cell
        const addBtn = document.createElement('button');
        addBtn.type = 'button';
        addBtn.className = 'add-line-btn';
        addBtn.textContent = 'Add a Line';
        addBtn.setAttribute('aria-label', 'Add a line');
        addBtn.onclick = function () {
            addRowBelow(this);
        };
        newRow.cells[0].appendChild(addBtn);
    }

    function removeRow(button) {
        const tableBody = document.getElementById('tableBody');
        if (tableBody.rows.length > 1) {
            button.closest('tr').remove();
            // If the removed row had the add button, ensure last row has the "Add a Line" button
            if (!document.querySelector('.add-line-btn')) {
                const rows = tableBody.querySelectorAll('tr');
                if (rows.length > 0) {
                    const lastRowFirstCell = rows[rows.length - 1].cells[0];
                    let addBtn = document.createElement('button');
                    addBtn.type = 'button';
                    addBtn.className = 'add-line-btn';
                    addBtn.textContent = 'Add a Line';
                    addBtn.setAttribute('aria-label', 'Add a line');
                    addBtn.onclick = function () {
                        addRowBelow(this);
                    };
                    lastRowFirstCell.appendChild(addBtn);
                }
            }
        } else {
            alert('At least one product line is required.');
        }
    }
</script>

</body>
</html>
